@model TrainingCategoryViewModel
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

<div id="deleteTrainingCategory" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm hidden">
    <div class="flex max-h-[700px] w-full max-w-2xl flex-col rounded-xl bg-white text-black shadow-lg p-6 animate-slide-up opacity-0 animate-fade-in">
        <div class="flex">
            <a onclick="closeDeleteTrainingCategory()" class="hover-pointer">
                <span class="material-symbols-outlined text-[50px]">arrow_circle_left</span>
            </a>
        </div>
        <div class="flex align-items-center justify-center w-full mb-3">
            <h1 class="text-3xl font-weight-bold uppercase">Delete Category?</h1>
        </div>

        <!-- Dummy Card -->
        <div class="bg-white border border-gray-200 rounded-2xl shadow-md overflow-hidden outline outline-1 outline-black flex flex-col w-[400px] align-self-center mb-3">
            <!-- Image -->
            <div class="h-[140px] relative">
                <img id="CategoryImage" class="w-full h-full object-cover outline outline-1 outline-black hidden" alt="Cover Image" />
                <div id="CategoryNoImage" class="flex h-full w-full items-center justify-center bg-gradient-to-br from-[#640A16] via-[#8B1538] to-[#640A16] text-center text-sm font-medium text-white">
                    <span class="material-symbols-outlined text-4xl opacity-50">image</span>
                    <p class="ml-2">No Cover Image</p>
                </div>
            </div>

            <!-- Content -->
            <div class="p-4 flex flex-col flex-grow">
                <!-- Title and Actions -->
                <div class="flex justify-between items-center mb-2">
                    <h2 id="CategoryTitle" class="text-xl font-semibold text-gray-800"></h2> 
                </div>

                <!-- Description -->
                <p id="CategoryDescription" class="text-sm text-gray-600 line-clamp-3"></p>

                <!-- Footer -->
                <div class="flex justify-between items-end text-xs text-gray-500 mt-auto pt-4">
                    <div>
                        <p id="CategoryModified"></p>
                        <p id="CategoryBy"></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex items-center bg-[#640A16] text-white rounded-xl w-[400px] align-self-center p-2 space-x-2 mb-3">
            <span class="material-symbols-outlined text-[#EAC231] !text-[50px]">warning</span>
            <p>WARNING! Deleting this will also remove the trainings under this category.</p>
        </div>

        <form asp-action="DeleteTrainingCategory" asp-controller="AdminTrainingCategory" method="post" class="align-self-center">
            <input type="hidden" name="id" id="categoryIdToDelete" />
            <input type="hidden" name="categoryName" id="categoryNameToDelete" />
            <button type="submit" class="bg-[#FFE9C6] hover:bg-[#e6c89c] w-[450px] text-black py-2 rounded-xl font-weight-bold">
                Confirm
            </button>
        </form>
    </div>
</div>

<script>
    function openDeleteTrainingCategory(categoryId, coverPicture, categoryName, description, updatedTime, accountFirstName, accountLastName) {
        const date = new Date(updatedTime);
        const formattedTime = date.toLocaleDateString('en-US', { month: 'short', day: '2-digit', year: 'numeric' });

        document.getElementById('categoryIdToDelete').value = categoryId;
        document.getElementById('categoryNameToDelete').value = categoryName;
        document.getElementById('CategoryTitle').textContent = categoryName;
        document.getElementById('CategoryDescription').textContent = description;
        document.getElementById('CategoryModified').textContent = formattedTime;
        document.getElementById('CategoryBy').textContent = accountFirstName + " " + accountLastName;

        const imageElement = document.getElementById('CategoryImage');
        const noImageDiv = document.getElementById('CategoryNoImage');

        if (coverPicture && coverPicture.trim() !== '') {
            imageElement.src = coverPicture;
            imageElement.classList.remove('hidden');
            noImageDiv.classList.add('hidden');
        } else {
            imageElement.classList.add('hidden');
            noImageDiv.classList.remove('hidden');
        }

        document.getElementById('deleteTrainingCategory').classList.remove('hidden');
    }
</script>
