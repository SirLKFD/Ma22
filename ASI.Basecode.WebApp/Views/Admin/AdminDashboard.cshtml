@model AdminDashboardViewModel

@{
    ViewData["Title"] = "Ma22 | Admin Dashboard";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

<!-- Title Section -->
<div class="mx-auto mt-10 w-[95%] max-w-7xl">
    <h1 class="mb-12 text-4xl font-bold uppercase tracking-tight text-[#000]">Admin Dashboard</h1>

    <!-- Stat Cards -->
    <div class="mb-8 flex flex-col gap-4 md:flex-row">
        <div class="flex flex-1 items-center gap-4 rounded-xl bg-white p-8 text-[#640A16] shadow">
            <span class="material-symbols-outlined rounded-full bg-[#FFE9C6] p-4 text-5xl">groups</span>
            <div>
                <div class="text-lg font-semibold">Total Enrollees</div>
                <div class="mt-1 text-3xl font-bold text-[#000]">@Model.EnrolleeCount</div>
            </div>
        </div>
        <div class="flex flex-1 items-center gap-4 rounded-xl bg-white p-8 text-[#640A16] shadow">
            <span class="material-symbols-outlined rounded-full bg-[#FFE9C6] p-4 text-5xl">category</span>
            <div>
                <div class="text-lg font-semibold">Total Categories</div>
                <div class="mt-1 text-3xl font-bold text-[#000]">@Model.CategoryCount</div>
            </div>
        </div>
        <div class="flex flex-1 items-center gap-4 rounded-xl bg-white p-8 text-[#640A16] shadow">
            <span class="material-symbols-outlined rounded-full bg-[#FFE9C6] p-4 text-5xl">menu_book</span>
            <div>
                <div class="text-lg font-semibold">Total Trainings</div>
                <div class="mt-1 text-3xl font-bold text-[#000]">@Model.TrainingCount</div>
            </div>
        </div>
    </div>

    <!-- Most/Least Enrolled -->
    <div class="mb-8 flex flex-col gap-4 md:flex-row">
        <div class="flex flex-1 items-center gap-4 rounded-xl bg-white p-8 shadow">
            <span class="material-symbols-outlined rounded-full bg-[#EAC231] p-3 text-4xl text-white">trending_up</span>
            <div>
                <div class="text-lg font-semibold text-[#640A16]">Most Enrolled Training</div>
                <div class="mt-1 text-xl font-bold text-black">@Model.MostEnrolledTrainingName</div>
            </div>
        </div>
        <div class="flex flex-1 items-center gap-4 rounded-xl bg-white p-8 shadow">
            <span class="material-symbols-outlined rounded-full bg-gray-200 p-3 text-4xl text-[#640A16]">trending_down</span>
            <div>
                <div class="text-lg font-semibold text-[#640A16]">Least Enrolled Training</div>
                <div class="mt-1 text-xl font-bold text-black">@Model.LeastEnrolledTrainingName</div>
            </div>
        </div>
    </div>

    <!-- Logs Section -->
    <div class="grid grid-cols-1 gap-6 md:grid-cols-3">
        <!-- Recently Created -->
        <div class="flex min-h-[180px] flex-col gap-3 rounded-xl bg-white p-8 shadow">
            <div class="mb-2 flex items-center gap-2">
                <span class="material-symbols-outlined rounded-full bg-[#EAC231] p-2 text-3xl text-white">add_circle</span>
                <h3 class="text-xl font-bold text-[#640A16]">Recently Created</h3>
            </div>
            <div class="flex flex-col gap-3">
                @if (Model.RecentCreatedLogs != null && Model.RecentCreatedLogs.Any())
                {
                    @foreach (var log in Model.RecentCreatedLogs)
                    {
                        <div class="flex flex-col gap-1 rounded-lg border border-gray-200 bg-[#FFE9C6] p-4 shadow-sm">
                            <div class="flex items-center gap-2">
                                <span class="font-semibold text-[#640A16]">@log.Entity</span>
                                <span class="ml-2 rounded bg-[#EAC231] px-2 py-0.5 text-xs text-white">@log.ActionType</span>
                            </div>
                            <div class="text-base font-bold text-black">@log.EntityName</div>
                            <div class="mt-1 text-xs text-gray-600">By <span class="font-semibold">@log.AccountName</span> on @log.TimeStamp.ToString("g")</div>
                        </div>
                    }
                }
                else
                {
                    <span class="text-gray-500">No recent created logs.</span>
                }
            </div>
        </div>
        <!-- Recently Updated -->
        <div class="flex min-h-[180px] flex-col gap-3 rounded-xl bg-white p-8 shadow">
            <div class="mb-2 flex items-center gap-2">
                <span class="material-symbols-outlined rounded-full bg-[#EAC231] p-2 text-3xl text-white">edit</span>
                <h3 class="text-xl font-bold text-[#640A16]">Recently Updated</h3>
            </div>
            <div class="flex flex-col gap-3">
                @if (Model.RecentUpdatedLogs != null && Model.RecentUpdatedLogs.Any())
                {
                    @foreach (var log in Model.RecentUpdatedLogs)
                    {
                        <div class="flex flex-col gap-1 rounded-lg border border-gray-200 bg-[#FFE9C6] p-4 shadow-sm">
                            <div class="flex items-center gap-2">
                                <span class="font-semibold text-[#640A16]">@log.Entity</span>
                                <span class="ml-2 rounded bg-[#EAC231] px-2 py-0.5 text-xs text-white">@log.ActionType</span>
                            </div>
                            <div class="text-base font-bold text-black">@log.EntityName</div>
                            <div class="mt-1 text-xs text-gray-600">By <span class="font-semibold">@log.AccountName</span> on @log.TimeStamp.ToString("g")</div>
                        </div>
                    }
                }
                else
                {
                    <span class="text-gray-500">No recent updated logs.</span>
                }
            </div>
        </div>
        <!-- Recently Deleted -->
        <div class="flex min-h-[180px] flex-col gap-3 rounded-xl bg-white p-8 shadow">
            <div class="mb-2 flex items-center gap-2">
                <span class="material-symbols-outlined rounded-full bg-[#EAC231] p-2 text-3xl text-white">delete</span>
                <h3 class="text-xl font-bold text-[#640A16]">Recently Deleted</h3>
            </div>
            <div class="flex flex-col gap-3">
                @if (Model.RecentDeletedLogs != null && Model.RecentDeletedLogs.Any())
                {
                    @foreach (var log in Model.RecentDeletedLogs)
                    {
                        <div class="flex flex-col gap-1 rounded-lg border border-gray-200 bg-[#FFE9C6] p-4 shadow-sm">
                            <div class="flex items-center gap-2">
                                <span class="font-semibold text-[#640A16]">@log.Entity</span>
                                <span class="ml-2 rounded bg-[#EAC231] px-2 py-0.5 text-xs text-white">@log.ActionType</span>
                            </div>
                            <div class="text-base font-bold text-black">@log.EntityName</div>
                            <div class="mt-1 text-xs text-gray-600">By <span class="font-semibold">@log.AccountName</span> on @log.TimeStamp.ToString("g")</div>
                        </div>
                    }
                }
                else
                {
                    <span class="text-gray-500">No recent deleted logs.</span>
                }
            </div>
        </div>
    </div>
</div>
