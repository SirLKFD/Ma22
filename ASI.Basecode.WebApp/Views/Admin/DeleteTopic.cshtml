@model TopicViewModel
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />


<div id="deleteTopic" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm hidden">
    <div class="flex max-h-[700px] w-full max-w-3xl flex-col rounded-xl bg-white text-black shadow-lg p-6">
        <div class="flex">
            <a onclick="closeDeleteTopic()" class="hover-pointer">
                <span class="material-symbols-outlined text-[50px]">arrow_circle_left</span>
            </a>
        </div>
        <div class="flex align-items-center justify-center w-full my-5">
            <h1 class="text-2xl font-weight-bold">Are you sure you want to delete this topic?</h1>
        </div>


        <div class="flex justify-between bg-[#640A16] rounded-md text-white h-[120px] px-4 py-3 text-xs mb-5">
            <!-- Left Side: Title + Meta -->
            
            <div class="flex flex-col justify-between">
                <div>
                    <h3 class="text-2xl font-semibold" id="DeleteTopicTitle">Flowcharts</h3>
                </div>
                <div>
                    <p>Created by: <span id="DeleteTopicBy">John Doe</span></p>
                    <p>Modified: <span id="DeleteTopicModified">June 12, 2025</span></p>
                </div>
                <div class="flex items-center gap-1 mt-auto">
                    <span class="material-symbols-outlined !text-[20px]">attachment</span>
                    <span id="DeleteTopicAttachmentCount">5 Attachments</span>
                </div>
            </div>

            
        </div>


        <div class="flex items-center bg-[#640A16] text-white rounded-xl w-[450px] align-self-center p-2 space-x-2 mb-5">
            <span class="material-symbols-outlined text-[#EAC231] !text-[50px]">warning</span>
            <p>WARNING! Deleting this will also remove all resources under this topic.</p>
        </div>

        <form asp-action="DeleteTopic" asp-controller="AdminTopic" method="post" class="align-self-center">
            <input type="hidden" name="id" id="topicIdToDelete" />
            <button id="deleteTopicBtn" class="bg-[#FFE9C6] w-[450px] text-black py-2 rounded-xl font-weight-bold flex items-center justify-center gap-2">
                Confirm
            </button>
        </form>

    </div>

</div>

<script>
    function openDeleteTopic(Id, TrainingId, TopicName, MediaCount, AccountFirstName, AccountLastName, UpdatedTime){
        document.getElementById('deleteTopic').classList.remove('hidden');
        document.getElementById("topicIdToDelete").value = Id;
        document.getElementById('DeleteTopicTitle').textContent = TopicName;
        document.getElementById('DeleteTopicBy').textContent = AccountFirstName + ' ' + AccountLastName;
        const date = new Date(UpdatedTime);
        document.getElementById('DeleteTopicModified').textContent = date.toLocaleDateString('en-US', { month: 'short', day: '2-digit', year: 'numeric' });
        document.getElementById('DeleteTopicAttachmentCount').textContent = MediaCount + ' Attachments';
    }
</script>
<script>
document.querySelector('#deleteTopic form').addEventListener('submit', function(e) {
    if (!this.checkValidity()) {
        // Form is invalid, let browser show errors, do not set loading state
        return;
    }
    var btn = document.getElementById('deleteTopicBtn');
    if (btn) {
        btn.disabled = true;
        btn.innerHTML = '<span class="spinner-border spinner-border-sm"></span><span>Deleting...</span>';
    }
});
</script>