@model TrainingCategoryViewModel
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

<div id="deleteTrainingCategory" class="fixed inset-0 z-50 flex hidden items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm">
    <div class="animate-slide-up animate-fade-in flex max-h-[700px] w-full max-w-2xl flex-col rounded-xl bg-white p-6 text-black opacity-0 shadow-lg">
        <div class="flex">
            <a onclick="closeDeleteTrainingCategory()" class="hover-pointer">
                <span class="material-symbols-outlined text-[50px]">arrow_circle_left</span>
            </a>
        </div>
        <div class="align-items-center mb-3 flex w-full justify-center">
            <h1 class="font-weight-bold text-3xl uppercase">Delete Category?</h1>
        </div>

        <!-- Dummy Card -->
        <div class="align-self-center mb-3 flex w-[400px] flex-col overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-md outline outline-1 outline-black">
            <!-- Image -->
            <div class="relative h-[140px]">
                <img id="CategoryImage" class="hidden h-full w-full object-cover outline outline-1 outline-black" alt="Cover Image" />
                <div id="CategoryNoImage" class="flex h-full w-full items-center justify-center bg-gradient-to-br from-[#640A16] via-[#8B1538] to-[#640A16] text-center text-sm font-medium text-white">
                    <span class="material-symbols-outlined text-4xl opacity-50">image</span>
                    <p class="ml-2">No Cover Image</p>
                </div>
            </div>

            <!-- Content -->
            <div class="flex flex-grow flex-col p-4">
                <!-- Title and Actions -->
                <div class="mb-2 flex items-center justify-between">
                    <h2 id="CategoryTitle" class="text-xl font-semibold text-gray-800"></h2> 
                </div>

                <!-- Description -->
                <p id="CategoryDescription" class="line-clamp-3 text-sm text-gray-600"></p>

                <!-- Footer -->
                <div class="mt-auto flex items-end justify-between pt-4 text-xs text-gray-500">
                    <div>
                        <p id="CategoryModified"></p>
                        <p id="CategoryBy"></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="align-self-center mb-3 flex w-[400px] items-center space-x-2 rounded-xl bg-[#640A16] p-2 text-white">
            <span class="material-symbols-outlined text-[#EAC231] !text-[50px]">warning</span>
            <p>WARNING! Deleting this will also remove the trainings under this category.</p>
        </div>

        <form asp-action="DeleteTrainingCategory" asp-controller="AdminTrainingCategory" method="post" class="align-self-center">
            <input type="hidden" name="id" id="categoryIdToDelete" />
            <input type="hidden" name="categoryName" id="categoryNameToDelete" />
            <button type="submit" class="font-weight-bold w-[450px] rounded-xl bg-[#FFE9C6] py-2 text-black hover:bg-[#e6c89c]">
                Confirm
            </button>
        </form>
    </div>
</div>

<script>
    function openDeleteTrainingCategory(categoryId, coverPicture, categoryName, description, updatedTime, accountFirstName, accountLastName) {
        const date = new Date(updatedTime);
        const formattedTime = date.toLocaleDateString('en-US', { month: 'short', day: '2-digit', year: 'numeric' });

        document.getElementById('categoryIdToDelete').value = categoryId;
        document.getElementById('categoryNameToDelete').value = categoryName;
        document.getElementById('CategoryTitle').textContent = categoryName;
        document.getElementById('CategoryDescription').textContent = description;
        document.getElementById('CategoryModified').textContent = formattedTime;
        document.getElementById('CategoryBy').textContent = accountFirstName + " " + accountLastName;

        const imageElement = document.getElementById('CategoryImage');
        const noImageDiv = document.getElementById('CategoryNoImage');

        if (coverPicture && coverPicture.trim() !== '') {
            imageElement.src = coverPicture;
            imageElement.classList.remove('hidden');
            noImageDiv.classList.add('hidden');
        } else {
            imageElement.classList.add('hidden');
            noImageDiv.classList.remove('hidden');
        }

        document.getElementById('deleteTrainingCategory').classList.remove('hidden');
    }
</script>

