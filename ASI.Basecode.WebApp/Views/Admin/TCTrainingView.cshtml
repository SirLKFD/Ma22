@model TrainingCategoryViewModel
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

<!-- Modal Overlay -->
<div id="viewTrainingCategory" class="fixed inset-0 z-50 flex hidden items-end bg-black bg-opacity-40 backdrop-blur-sm">
    <div id="modalContent" class="flex h-[90vh] w-full translate-y-full flex-col gap-5 overflow-y-auto rounded-t-2xl bg-white p-6 text-black opacity-0 shadow-lg transition-transform duration-300">

        <!-- Close Button -->
        <div class="flex justify-start">
            <a onclick="closeViewTrainingCategory()" class="cursor-pointer">
                <span class="material-symbols-outlined text-[50px] text-gray-700 transition hover:text-black">arrow_circle_up</span>
            </a>
        </div>

        <!-- Title -->
        <h1 class="text-center text-4xl font-bold uppercase">@Model.CategoryName</h1>

        <!-- Search Bar -->
        <div class="relative mx-auto mb-8 mt-2 w-full sm:w-[500px]">
            <input type="search" name="search" id="default-search"
                   class="h-12 w-full rounded-full border border-gray-300 px-5 pr-[90px] text-sm text-gray-900 shadow-sm transition focus:outline-none focus:ring-2 focus:ring-[#EAC231]"
                   placeholder="Search Trainings..." value="@Context.Request.Query["search"]" />
            <button type="submit"
                    class="absolute right-2 top-[6px] rounded-full bg-[#EAC231] px-4 py-2 text-sm font-medium text-black transition hover:bg-[#cfa221]">
                Search
            </button>
        </div>

        <!-- Add Button -->
        <button class="ml-auto rounded-full bg-[#EAC231] px-6 py-2 text-sm font-semibold text-black shadow-md transition hover:bg-[#cfa221]" onclick="addTraining()">
            Add+
        </button>

        <!-- Training Cards Grid -->
        <div class="mt-4 grid grid-cols-1 place-items-center gap-8 sm:grid-cols-2 lg:grid-cols-3">
            @for (int i = 0; i < 5; i++)
            {
                <div class="flex max-h-[250px] w-[450px] flex-col overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-md outline outline-1 outline-black">
                    <div class="h-[180px]">
                        <img class="h-full w-full object-cover outline outline-1 outline-black" alt="Cover Image" />
                    </div>
                    <div class="flex flex-grow flex-col p-4">
                        <div class="mb-2 flex items-center justify-between">
                            <h2 class="text-xl font-semibold text-gray-800">Dummy Name</h2>
                        </div>
                        <p class="line-clamp-3 text-sm text-gray-600">Dummy description about the training. A short teaser here.</p>
                        <div class="mt-auto flex items-end justify-between pt-4 text-xs text-gray-500">
                            <div>
                                <p><strong>Modified:</strong> time and day</p>
                                <p><strong>By:</strong> jaborel</p>
                            </div>
                            <button class="rounded-full bg-[#640A16] px-4 py-2 text-xs font-bold text-white transition hover:bg-[#4e0712]">
                                Access
                            </button>
                        </div>
                    </div>
                </div>
            }
        </div>

        <!-- Pagination -->
        <div class="mt-8 flex justify-end">
            <nav>
                <ul class="inline-flex gap-1 text-sm">
                    <li>
                        <a href="#" class="rounded-l-full border border-gray-300 bg-white px-3 py-2 text-gray-600 transition hover:bg-gray-100 hover:text-gray-800">Previous</a>
                    </li>
                    @for (int i = 1; i <= 5; i++)
                    {
                        <li>
                            <a href="#"
                               class="rounded-md border border-gray-300 px-3 @(i == 3 ? "bg-blue-50 text-blue-600" : "bg-white text-gray-600 hover:bg-gray-100 hover:text-gray-800") py-2 transition">
                                @i
                            </a>
                        </li>
                    }
                    <li>
                        <a href="#" class="rounded-r-full border border-gray-300 bg-white px-3 py-2 text-gray-600 transition hover:bg-gray-100 hover:text-gray-800">Next</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

<!-- Reuse AddTraining Partial -->
@await Html.PartialAsync("~/Views/Admin/AddTraining.cshtml", new TrainingViewModel())

<!-- Scripts -->
<script>
    function addTraining() {
        const addModal = document.getElementById('addTraining');
        const modalContent = addModal.querySelector('.flex.flex-row');
        addModal.classList.remove('hidden');
        if (modalContent) modalContent.classList.add('translate-y-0', 'opacity-100');
    }

    function closeViewTrainingCategory() {
        document.getElementById('viewTrainingCategory').classList.add('hidden');
    }

    function closeAddTraining() {
        document.getElementById('addTraining').classList.add('hidden');
    }
</script>
