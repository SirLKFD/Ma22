    @model TopicViewModel
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />


    <div id="addTopic" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm hidden">
        <div class="flex w-full max-w-5xl max-h-[90vh] flex-col rounded-xl bg-white text-black shadow-lg p-6">

            <div class="flex">
                <a onclick="closeAddTopic()" class="hover-pointer">
                    <span class="material-symbols-outlined text-[50px]">arrow_circle_left</span>
                </a>
            </div>
            <div class="flex align-items-center justify-start w-full my-3 mx-5">
                <h1 class="uppercase text-2xl font-weight-bold">Add New Topic</h1>
            </div>
            <form asp-controller="AdminTopic" asp-action="AddTopic" method="post" enctype="multipart/form-data">
                <div class="flex">
                    <!-- Left side with form fields -->
                    <input type="hidden" asp-for="TrainingId" id="TrainingId" />
                    <div class="flex flex-col w-1/2">
                        <div class="mx-5 mt-2">
                            <label asp-for="TopicName" class="block text-sm font-medium text-black mb-2">Topic Name</label>
                            <input asp-for="TopicName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#EAC231] text-black" />
                            <span asp-validation-for="TopicName" class="text-danger"></span>
                        </div>

                        <div class="mx-5 mt-2">
                            <label asp-for="Description" class="block text-sm font-medium text-black mb-2">Description</label>
                            <textarea asp-for="Description" rows="12" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#EAC231] text-black"></textarea>
                            <span asp-validation-for="Description" class="text-danger"></span>
                        </div>

                        <button class="bg-[#FFE9C6] mx-5 mt-4 rounded-lg px-4 py-2 font-semibold">Add Topic</button>
                    </div>

                    <div class="flex flex-col w-1/2 bg-[#640A16] rounded-lg p-4 text-white gap-2">
                        <h2 class="text-2xl font-semibold">Resources</h2>
                        
                        <div class="flex flex-1 gap-2 flex-col ">
                            <!-- Videos -->
                            <div class="flex-1 flex flex-col">
                                <div class="flex justify-between">
                                    <p class="text-lg">Videos</p>
                                    <label for="VideoFilesAdd"  class="cursor-pointer">
                                    <input type="file"
                                        name="VideoFilesAdd"
                                        id="VideoFilesAdd"
                                        accept="video/*"
                                        multiple
                                        class="hidden" />
                                    <div class="flex items-center text-white">
                                        <span class="material-symbols-outlined ">add_photo_alternate</span>
                                        <h1 class="uppercase font-semibold">Upload</h1>
                                    </div>
                                    </label>
                                </div>
                                <div class="flex flex-1 flex-col bg-white w-full rounded-xl p-2 items-center">
                                    <div id="VideoPreviewAdd" class="flex w-full h-full text-black gap-2 overflow-x-auto items-center"> 
                                    </div>
                                 </div>  
                            </div>

                            <!-- Images -->
                            <div class="flex-1 flex flex-col">
                                <div class="flex justify-between">
                                    <p class="text-lg">Images</p>
                                    <label for="ImageFilesAdd"  class="cursor-pointer">
                                    <input type="file"
                                        name="ImageFilesAdd"
                                        id="ImageFilesAdd"
                                        accept="image/*"
                                        multiple
                                        class="hidden" />
                                    <div class="flex items-center text-white">
                                        <span class="material-symbols-outlined ">add_photo_alternate</span>
                                        <h1 class="uppercase font-semibold">Upload</h1>
                                    </div>
                                    </label>
                                </div>
                                <div class="flex flex-1 flex-col bg-white w-full rounded-xl p-2 items-center">
                                    <div id="ImagePreviewAdd" class="flex w-full h-full text-black gap-2 overflow-x-auto items-center"> 
                                    </div>
                                 </div>  
                            </div>

                            <!-- Documents -->
                             <div class="flex-1 flex flex-col">
                                <div class="flex justify-between">
                                    <p class="text-lg">Documents</p>
                                    <label for="DocumentFilesAdd"  class="cursor-pointer">
                                    <input type="file"
                                        name="DocumentFilesAdd"
                                        id="DocumentFilesAdd"
                                        accept="application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
                                        multiple
                                        class="hidden" />
                                    <div class="flex items-center text-white">
                                        <span class="material-symbols-outlined ">add_photo_alternate</span>
                                        <h1 class="uppercase font-semibold">Upload</h1>
                                    </div>
                                    </label>
                                </div>
                                <div class="flex flex-1 flex-col bg-white w-full rounded-xl p-2 items-center">
                                    <div id="DocumentPreviewAdd" class="flex w-full h-full text-black gap-2 overflow-x-auto items-center"> 
                                    </div>
                                 </div>  
                            </div>
                        </div>
                    </div>
                </div>

            </form>
        </div>
    </div>

    <script>
        function addTopic(trainingId) {
            document.getElementById('addTopic').classList.remove('hidden');
            document.getElementById('TrainingId').value = trainingId;
        }

        // Listen for file input changes and log selected files
    ['VideoFilesAdd', 'ImageFilesAdd', 'DocumentFilesAdd'].forEach(function(inputId) {
        var input = document.getElementById(inputId);
        if (input) {
            input.addEventListener('change', function(event) {
                if (event.target.files && event.target.files.length > 0) {
                    const fileNames = Array.from(event.target.files).map(f => f.name);
                    console.log(`[UPLOAD] ${inputId}: Selected files:`, fileNames);
        } else {
                    console.log(`[UPLOAD] ${inputId}: No files selected.`);
                }
            });
        }
    });

    function addNewFilePreview(previewId, file, icon, inputId) {
        const preview = document.getElementById(previewId);
        const div = document.createElement('div');
        div.className = 'flex flex-col items-center min-w-[60px] cursor-pointer media-item new';
        div.innerHTML = `<span class="material-symbols-outlined text-black" style="font-size:30px">${icon}</span>\n<span class='truncate w-[60px] text-xs text-black text-center'>${file.name.substring(0, 10)}</span>\n<button type='button' class='delete-media-btn' style='color:red;'><span class="material-symbols-outlined" style='font-size: 20px'>delete</span></button>`;
        div.querySelector('.delete-media-btn').onclick = function(e) {
            div.remove();
            e.stopPropagation();
        };
        preview.appendChild(div);
    }

    document.getElementById('ImageFilesAdd').addEventListener('change', function(event) {
        const preview = document.getElementById('ImagePreviewAdd');
        Array.from(event.target.files).forEach(file => {
            addNewFilePreview('ImagePreviewAdd', file, 'image', 'ImageFilesAdd');
        });
    });

    document.getElementById('VideoFilesAdd').addEventListener('change', function(event) {
        const preview = document.getElementById('VideoPreviewAdd');
        Array.from(event.target.files).forEach(file => {
            addNewFilePreview('VideoPreviewAdd', file, 'movie', 'VideoFilesAdd');
        });
    });

    document.getElementById('DocumentFilesAdd').addEventListener('change', function(event) {
        const preview = document.getElementById('DocumentPrevieAdd');
        Array.from(event.target.files).forEach(file => {
            addNewFilePreview('DocumentPreviewAdd', file, 'description', 'DocumentFilesAdd');
        });
    });

    </script>
